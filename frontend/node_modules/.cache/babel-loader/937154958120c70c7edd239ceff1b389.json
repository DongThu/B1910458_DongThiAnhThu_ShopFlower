{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4a1ada2a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"admin-container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between\"\n};\nconst _hoisted_3 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_4 = {\n  class: \"table colored-header datatable project-list\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Mã hóa đơn\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Mã người dùng\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Điện thoại\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Địa chỉ\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Thời gian\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Thanh toán\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Tổng cộng\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Trạng thái\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Thao tác\")])], -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" <h1>Hello Admin!</h1> \"), _createElementVNode(\"button\", {\n    class: \"btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.handleLogout())\n  }, \"Đăng xuất\")]), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" PROJECT TABLE \"), _createElementVNode(\"table\", _hoisted_4, [_hoisted_5, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filterBills.slice().reverse(), b => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: b.bill_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(b.bill_id), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.user_id), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_phone), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_address), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_when), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString(b.bill_paid), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, \"$\" + _toDisplayString(b.bill_total), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, _toDisplayString($data.avaiableStatus[b.bill_status]), 1\n    /* TEXT */\n    ), _createElementVNode(\"td\", null, [b.bill_status < 5 ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      class: \"action-btn\",\n      onClick: $event => $options.nextStatusBtn(b.bill_id)\n    }, _toDisplayString($data.avaiableStatus[b.bill_status + 1]), 9\n    /* TEXT, PROPS */\n    , _hoisted_6)) : _createCommentVNode(\"v-if\", true), b.bill_status == 1 ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      class: \"cancel-btn\",\n      onClick: $event => $options.cancelBtn(b.bill_id)\n    }, \" Hủy \", 8\n    /* PROPS */\n    , _hoisted_7)) : b.bill_status == 5 && b.bill_paid == 'false' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      class: \"paid-btn\",\n      onClick: $event => $options.paidBtn(b.bill_id)\n    }, \" Thanh toán \", 8\n    /* PROPS */\n    , _hoisted_8)) : b.bill_status == 5 && b.bill_paid == 'true' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 3,\n      class: \"action-btn\",\n      onClick: $event => $options.nextStatusBtn(b.bill_id)\n    }, _toDisplayString($data.avaiableStatus[b.bill_status + 1]), 9\n    /* TEXT, PROPS */\n    , _hoisted_9)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_createCommentVNode","onClick","$options","_hoisted_5","_Fragment","_renderList","slice","reverse","b","key","bill_id","_toDisplayString","user_id","bill_phone","bill_address","bill_when","bill_paid","bill_total","$data","bill_status","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9"],"sourceRoot":"","sources":["D:\\Niên luận ngành\\ShopFlower\\frontend\\src\\admin\\Dashboard.vue"],"sourcesContent":["<template>\r\n    <div class=\"admin-container\">\r\n        <div class=\"d-flex justify-content-between\">\r\n            <!-- <h1>Hello Admin!</h1> -->\r\n            <button class=\"btn\" @click=\"handleLogout()\">Đăng xuất</button>\r\n        </div>\r\n\r\n        <div class=\"table-responsive\">\r\n            <!-- PROJECT TABLE -->\r\n            <table class=\"table colored-header datatable project-list\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Mã hóa đơn</th>\r\n                        <th>Mã người dùng</th>\r\n                        <th>Điện thoại</th>\r\n                        <th>Địa chỉ</th>\r\n                        <th>Thời gian</th>\r\n                        <th>Thanh toán</th>\r\n                        <th>Tổng cộng</th>\r\n                        <th>Trạng thái</th>\r\n                        <th>Thao tác</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(b) in filterBills.slice().reverse()\" :key=\"b.bill_id\">\r\n                        <td>{{ b.bill_id }}</td>\r\n                        <td>{{ b.user_id }}</td>\r\n                        <td>{{ b.bill_phone }}</td>\r\n                        <td>{{ b.bill_address }}</td>\r\n                        <td>{{ b.bill_when }}</td>\r\n                        <td>{{ b.bill_paid }}</td>\r\n                        <td>${{ b.bill_total }}</td>\r\n                        <td>{{ avaiableStatus[b.bill_status] }}</td>\r\n                        <td>\r\n                            <button v-if=\"b.bill_status < 5\" class=\"action-btn\" @click=\"nextStatusBtn(b.bill_id)\">\r\n                                {{ avaiableStatus[b.bill_status + 1] }}\r\n                            </button>\r\n\r\n                            <button v-if=\"b.bill_status == 1\" class=\"cancel-btn\" @click=\"cancelBtn(b.bill_id)\">\r\n                                Hủy\r\n                            </button>\r\n\r\n                            <button v-else-if=\"b.bill_status == 5 && b.bill_paid == 'false'\" class=\"paid-btn\"\r\n                                @click=\"paidBtn(b.bill_id)\">\r\n                                Thanh toán\r\n                            </button>\r\n\r\n                            <button v-else-if=\"b.bill_status == 5 && b.bill_paid == 'true'\" class=\"action-btn\"\r\n                                @click=\"nextStatusBtn(b.bill_id)\">\r\n                                {{ avaiableStatus[b.bill_status + 1] }}\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapState, mapMutations } from \"vuex\";\r\nexport default {\r\n    name: 'Dashboard',\r\n\r\n    data() {\r\n        return {\r\n            avaiableStatus: [\"Hủy\", \"Đã xác nhận\", \"Chuẩn bị\", \"Kiểm tra\", \"Đang giao\", \"Đã giao\", \"Hoàn thành\"],\r\n            allBills: [],\r\n            showOrderDetails: false,\r\n            sendId: undefined,\r\n            interval: \"\",\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.getAllBills();\r\n        if (!this.admin) {\r\n            this.$router.push(\"/\");\r\n        }\r\n    },\r\n\r\n    mounted: function () {\r\n        this.autoUpdate();\r\n    },\r\n\r\n    beforeUnmount() {\r\n        clearInterval(this.interval)\r\n    },\r\n\r\n    computed: {\r\n        ...mapState([\"allFlowers\", \"admin\"]),\r\n\r\n        filterBills: function () {\r\n            return this.allBills.filter((b) => b.bill_status < 6 && b.bill_status > 0);\r\n        },\r\n    },\r\n\r\n    methods: {\r\n        ...mapMutations([\"setAdmin\"]),\r\n\r\n        async getAllBills() {\r\n            this.allBills = (await axios.get('/billstatus')).data;\r\n        },\r\n\r\n        sendBillId: function (id) {\r\n            this.sendId = id\r\n            this.showOrderDetails = !this.showOrderDetails;\r\n        },\r\n\r\n        closeView: function () {\r\n            this.showOrderDetails = !this.showOrderDetails;\r\n        },\r\n\r\n        handleLogout: function () {\r\n            this.setAdmin(\"\");\r\n        },\r\n\r\n        async nextStatusBtn(id) {\r\n            await axios.put('/billstatus/' + id);\r\n            this.getAllBills();\r\n        },\r\n\r\n        async paidBtn(id) {\r\n            await axios.put('/billstatus/paid/' + id);\r\n            this.getAllBills();\r\n        },\r\n\r\n        async cancelBtn(id) {\r\n            await axios.put('/billstatus/cancel/' + id);\r\n            this.getAllBills();\r\n        },\r\n\r\n        autoUpdate: function () {\r\n            this.interval = setInterval(function () {\r\n                this.getAllBills();\r\n            }.bind(this), 1000);\r\n        }\r\n\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.admin-container {\r\n    background-color: #fff;\r\n    height: 100vh;\r\n    padding: 2rem 9%;\r\n    font-size: 16px;\r\n}\r\n\r\n.project-list>tbody>tr>td {\r\n    padding: 12px 8px;\r\n}\r\n\r\n.project-list>tbody>tr>td .avatar {\r\n    width: 22px;\r\n    border: 1px solid #CCC;\r\n}\r\n\r\n.table-responsive {\r\n    margin-top: 8vh;\r\n}\r\n\r\n.action-btn,\r\n.cancel-btn,\r\n.paid-btn {\r\n    width: 100px;\r\n    height: 25px;\r\n    color: white;\r\n    text-transform: capitalize;\r\n}\r\n\r\n.action-btn {\r\n    background-color: #0da9ef;\r\n    margin-right: 10px;\r\n}\r\n\r\n.cancel-btn,\r\n.paid-btn {\r\n    background-color: red;\r\n}\r\n\r\n.action-btn:hover {\r\n    background-color: #27ae60;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}